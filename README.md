# kaggle-instacart
商業資料分析 Kaggle競賽 InstaCart Market Basket Analysis 
顧客回購預測及潛在商品組合洞察

**I. Research Motivation and Purpose:**

In recent years, with the rapid growth of e-commerce platforms, improving customer repurchase rates and the accuracy of product recommendations has become a key factor in business competition. As students majoring in Information Management, we are likely to engage in related industries in the future. To prepare for potential job responsibilities, this study focuses on transaction records and product lists provided by the e-commerce platform Instacart. Through a Sliding Window-based feature extraction approach, we aim to capture users' short-term and long-term purchasing patterns, and build a system that can predict whether customers will repurchase certain products and generate personalized product recommendations.

The dataset includes approximately 30 million orders and nearly 50,000 products. Due to the large volume of data, special attention must be paid to program efficiency and computational resource limitations during model training and feature engineering. If necessary, appropriate sampling of order records will be applied to ensure that training can be completed within a reasonable time frame.

**Ⅱ. Research Methods**

1\. Data Source

Using the public Instacart dataset, which contains 3,421,083 orders, 206,209 customers, and nearly 50,000 products.

2\. Data Preprocessing

A. Since Instacart data does not have absolute dates, relative time is reconstructed using days since prior order, and each order is organized into a product sequence as input for subsequent features.

3\. Feature Engineering

A. Recency, Frequency, Monetary

- Recency: Number of days since the last purchase of the target product.
- Frequency: Number of times the product was purchased during the observation period.
- Monetary (Purchase Quantity): Total amount of the product purchased during the observation period.

4\. Model Training and Evaluation

A. Model: XGBoost

B. Model training: The data generated by the sliding window is divided into training and test sets for iterative training.

**Ⅲ. Research Results**

(Ⅰ) User Behavior Analysis

A. Orders per User

![一張含有 文字, 繪圖, 行, 螢幕擷取畫面 的圖片

AI 產生的內容可能不正確。]

(A) Most users placed only 1-2 orders, indicating a large segment of low-activity customers.

(B) The distribution shows a long-tail pattern, with a small group of highly active users.

(C) This segmentation is suitable for targeted marketing and personalized engagement strategies.

B. Orders by Day of Week

![一張含有 文字, 螢幕擷取畫面, 行, 繪圖 的圖片

AI 產生的內容可能不正確。]

(A) Order volume peaks on Day 0 and Day 1 (weekends), suggesting users prefer weekend shopping.

(B) Weekday order counts are lower, with Day 3 being the lowest.

(C) Midweek promotions could be used to boost engagement.

C. Orders by Hour of Day

![一張含有 文字, 繪圖, 行, 螢幕擷取畫面 的圖片

AI 產生的內容可能不正確。]

(A) Order activity rises sharply from 7 AM, peaking between 10 AM and 3 PM.

(B) After 3 PM, order volume gradually declines, with minimal activity after 8 PM.

(C) Operational resources should be concentrated during peak hours.

(Ⅱ) Product Analysis

A. Top 30 Products (by Frequency)

![一張含有 文字, 螢幕擷取畫面, 圖表, 平行 的圖片

AI 產生的內容可能不正確。]

(A) Banana is the most frequently purchased item, followed by organic fruits and vegetables.

(B) Consumer preference leans toward fresh, healthy, and organic products.

(C) These trends reflect growing demand for wellness-oriented groceries.

B. Sales by Department

![一張含有 文字, 螢幕擷取畫面, 繪圖, 行 的圖片

AI 產生的內容可能不正確。]

(A) The Produce department leads by a wide margin in total sales.

(B) Dairy & Eggs, Snacks, and Beverages also show strong performance.

(C) These categories represent core consumer needs and drive platform revenue.

C. Top 20 Products by Reorder Rate

(Ⅲ) Model Evaluation

A. ROC Curve

![]

(A) The model achieved an AUC of 0.7834, indicating strong ability to distinguish between repurchase and non-repurchase cases.

(B) The ROC curve lies well above the diagonal, confirming predictive power.

B. Precision-Recall Curve

![]

(A) The Average Precision (AP) is 0.5693, showing models outperform random guessing.

(B) As recall (X-axis) increases, precision (Y-axis) decreases more rapidly.

C. Calibration Curve

![]

(A) The predicted probabilities closely match actual outcomes.

(B) The curve aligns well with the ideal diagonal, indicating well-calibrated predictions.

(C) This supports the use of probability scores for ranking and decision-making.

D. Confusion Matrix (Threshold = 0.0615)

![]

(A) True Positives: 987078; True Negatives: 9723382

(B) False Positives: 473912; False Negatives: 2087097

(C) This model often misclassifies cases that will actually repurchase (TP) as cases that will not repurchase (FN), with a misclassification rate of approximately 67.9%.

(D) Threshold tuning may be required depending on business application.

E. Feature Importance (Gain)

![]

(A) The most important features are user-product interaction metrics such as up_order_rate, up_ordering_since_last_order, and up_order_rate_since_last_order.

(B) MBA features contribute meaningfully but are secondary to behavioral features.

(C) This highlights the value of personalized historical data in repurchase prediction.

**IV. Conclusion**

(I) Summary of Findings

A. Market Basket Analysis (FP-Growth) successfully identified frequent itemsets and association rules, providing valuable insights into product associations.

B. Feature engineering combining product, user, and user-product interaction features improved predictive performance.

C. XGBoost achieved strong classification results (AUC = 0.8182), with user-product interaction features being the most influential predictors.

(II) Business Implications

A. High-frequency and high-reorder products (e.g., bananas, dairy, fresh produce) highlight consumer preferences for essential and organic items.

B. Peak shopping times (weekends, daytime hours) provide guidance for marketing campaigns and operational resource allocation.

C. Personalized recommendations based on user history and MBA rules can enhance customer loyalty and repurchase rates.

(III) Future Work

A. Incorporate additional features such as product pricing, promotions, and seasonal effects.

B. Explore deep learning models (e.g., RNN/LSTM) to capture sequential purchase behavior.

C. Deploy the system as a recommendation API for real-world e-commerce applications.

**V. References**

(I) Psparks. (2017, November 20). _Instacart Market Basket Analysis_. Kaggle. <https://www.kaggle.com/datasets/psparks/instacart-market-basket-analysis>
